{% include 'header.html' %}

<style>
    .cvall_menu:hover {
        background-color: #F1EFEF;
        color: #4999D7;
    }

    .cvall_action:hover {
        color: #4999D7;
    }

    .cvall_link:hover {
        color: #004AAD !important;
    }
</style>

<div style="margin-left: 30px; padding-right: 30px;">
    <p style="font-size: 18px; margin-top: 30px;">
        <a style="text-decoration: none; color: #4999D7;" class="cvall_link" href="/">Home</a>
        <a style="text-decoration: none; color: #4999D7;" class="cvall_link" href="/data/datasets"> > Data
            Preparation</a>
        <a style="text-decoration: none; color: #4999D7;" class="cvall_link"
            href="/review_dataset?dataset_name={{dataset_name}}"> > {{dataset_name}}</a>
    </p>
    <div class="row flex-nowrap" style="margin-left: 0">
        {% include 'data/data_menu.html' %}
        <main class="col ps-md-2 pt-2">
            <div style="font-size: 24px; font-weight: bold; margin-top: -15px; margin-bottom: 15px;">
                Data Preparation | {{dataset_name}} | Overview
            </div>
            <div class="row" style="color: #004AAD;">
                <!-- Button trigger modal -->
                <p class="col-auto cvall_action" type="button">
                    <i class="fas fa-edit"></i> Modify Dataset
                </p>
                <p class="col-auto cvall_action" type="button">
                    <i class="fas fa-sync-alt"></i> Refresh
                </p>
                <p class="col-auto cvall_action" type="button">
                    <i class="fas fa-download"></i> Download
                </p>
            </div>

            <div class="row">
                <div class="card col-auto" style="border: 0px; width: 45%; min-width: 300px; font-size: 13px;">
                    <div class="card-body" style="padding-left: 0px;">
                        <table class="table table-striped">
                            <tbody>
                                <tr>
                                    <td>Business Secarino</td>
                                    <td><span
                                            class="badge bg-warning text-dark">{{dataset_info['dataset_secarino']}}</span>
                                    </td>
                                </tr>
                                <tr>
                                    <td>Dataset Type</td>
                                    <td><span
                                            class="badge bg-primary text-light">{{dataset_info['dataset_type']}}</span>
                                    </td>
                                </tr>
                                <tr>
                                    <td>Created Date</td>
                                    <td><span
                                            class="badge bg-success text-light">{{dataset_info['created_date']}}</span>
                                    </td>
                                </tr>
                                <tr>
                                    <td>Dataset Classes</td>
                                    <td>
                                        {% for class in dataset_info['class_list'] %}
                                        <span class="badge bg-info text-dark">{{class}}</span>
                                        {% endfor %}
                                    </td>
                                </tr>
                                <tr>
                                    <td>Number of Images</td>
                                    <td><span class="badge bg-dark text-light">{{dataset_info['nbr_images']}}</span>
                                    </td>
                                </tr>
                                <tr>
                                    <td>Number of Annotated Images</td>
                                    <td><span class="badge bg-dark text-light">null</span>
                                    </td>
                                </tr>
                                <tr>
                                    <td>Number of Objects</td>
                                    <td><span class="badge bg-dark text-light">null</span>
                                    </td>
                                </tr>
                                <tr>
                                    <td>Upload Data Progress</td>
                                    <td><span
                                            class="badge bg-warning text-dark">{{dataset_info['upload_dataset_progress']}}</span>
                                    </td>
                                </tr>
                                <tr>
                                    <td>Annotation Progress</td>
                                    <td><span
                                            class="badge bg-warning text-dark">{{dataset_info['annotation_progress']}}</span>
                                    </td>
                                </tr>
                                <tr>
                                    <td>Augment Progress</td>
                                    <td><span
                                            class="badge bg-warning text-dark">{{dataset_info['augment_progress']}}</span>
                                    </td>
                                </tr>
                                <tr>
                                    <td>Description</td>
                                    <td><span>{{dataset_info['dataset_decs']}}</span>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
                <div class="col-auto">
                    <div class="row" style="margin-bottom: 30px;">
                        <div class="chart-container col-auto" style="position: relative; min-width: 300px;">
                            <canvas id="anotated_ratio_chart"></canvas>
                        </div>
                        <div class="chart-container col-auto" style="position: relative; height: 300px;">
                            <canvas id="num_class_bar_chart"></canvas>
                        </div>
                    </div>
                    <div class="row">
                        <div class="chart-container col-auto" style="position: relative; height: 300px;">
                            <canvas id="object_size_chart"></canvas>
                        </div>
                        <div class="chart-container col-auto" style="position: relative; height: 300px;">
                            <canvas id="num_object_chart"></canvas>
                        </div>
                    </div>
                </div>
            </div>
            <!-- <div style="font-size: 15px; font-weight: bold;">
                Overall Analysis
            </div> -->
            <div class="row">
                <!-- <div class="chart-container col-auto" style="position: relative; height: 300px;">
                    <canvas id="num_class_bar_chart"></canvas>
                </div>
                <div class="chart-container col-auto" style="position: relative; height: 300px;">
                    <canvas id="object_size_chart"></canvas>
                </div>
                <div class="chart-container col-auto" style="position: relative; height: 300px;">
                    <canvas id="num_object_chart"></canvas>
                </div> -->
            </div>

        </main>
    </div>
    <script>
        $("#overview_data_menu").css("background-color", "#F1EFEF");
        const anotated_ratio_chart = document.getElementById('anotated_ratio_chart');
        const num_class_bar_chart = document.getElementById('num_class_bar_chart');
        const object_size_chart = document.getElementById('object_size_chart');
        const num_object_chart = document.getElementById('num_object_chart');

        new Chart(num_object_chart, {
            type: 'bar',
            data: {
                labels: ['1-4', '5-8', '9-12', '13-15'],
                datasets: [{
                    label: 'Number of images',
                    data: [100, 200, 150, 700],
                    borderWidth: 1,
                    backgroundColor: [
                        'rgb(0,151,178)',
                    ],
                }]
            },

            options: {
                maintainAspectRatio: false,
                scales: {
                    y: {
                        beginAtZero: true
                    }
                },
                plugins: {
                    title: {
                        display: true,
                        text: 'Number of objects per image',
                    }

                }
            }
        });

        new Chart(object_size_chart, {
            type: 'pie',
            data: {
                labels: ['tiny', 'small', 'medium', 'large', 'very large'],
                datasets: [{
                    label: 'Number of objects',
                    data: [1000, 1200, 900, 600, 100, 200],
                    borderWidth: 1
                }]
            },

            options: {
                maintainAspectRatio: false,
                scales: {
                    y: {
                        beginAtZero: true
                    }
                },
                plugins: {
                    title: {
                        display: true,
                        text: 'Object Size Distribution',
                    }

                }
            }
        });


        new Chart(num_class_bar_chart, {
            type: 'bar',
            data: {
                labels: ['plastic', 'metal', 'paper', 'glass'],
                datasets: [{
                    label: 'Number of objects',
                    data: [1000, 1200, 900, 600],
                    borderWidth: 1,
                    backgroundColor: [
                        'rgb(0,74,173)',
                    ],
                }]
            },

            options: {
                maintainAspectRatio: false,
                scales: {
                    y: {
                        beginAtZero: true
                    }
                },
                plugins: {
                    title: {
                        display: true,
                        text: 'Number of objects per class',
                    }

                }
            }
        });

        new Chart(anotated_ratio_chart, {
            type: 'doughnut',
            data: {
                labels: ['Non-Annotated', 'Annotated'],
                datasets: [{
                    label: ' Number of Images',
                    data: [2000, 1000],
                    borderWidth: 1,
                    backgroundColor: [
                        'rgb(255,145,77)',
                        'rgb(46,180,231)',
                    ],
                }]
            },

            options: {
                // maintainAspectRatio: false,
                plugins: {
                    title: {
                        display: true,
                        text: 'Portion of the annotated images',
                    }

                }
            }
        });

    </script>

</div>